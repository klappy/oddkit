{
  "schema_version": "1.0.0",
  "verdict": "INCOMPATIBLE",
  "warnings": [],
  "audit_date": "2026-02-06T01:22:48.810Z",
  "oddkit": {
    "commit": "5fa5407fef02582207fedc00659a5de12bde3523",
    "dirty": false
  },
  "baseline": {
    "url": "https://github.com/klappy/klappy.dev.git",
    "ref": "main",
    "commit": "2e1b81e21f57cbc2678919c1123d974e239e60fe"
  },
  "cache": {
    "fresh": false,
    "path": "/root/.oddkit/cache/klappy.dev/main",
    "purged": false
  },
  "contract": {
    "version": "1.0.0",
    "sha256": "64f8af78",
    "path": "src/audit/COMPATIBILITY-CONTRACT.md"
  },
  "tests": {
    "total": 15,
    "passed": 14,
    "failed": 1,
    "ordered": true,
    "results": [
      {
        "name": "smoke",
        "description": "Core CLI: index, librarian, validate, explain",
        "passed": true,
        "duration": 5588,
        "error": null
      },
      {
        "name": "mcp",
        "description": "MCP server boot",
        "passed": true,
        "duration": 1532,
        "error": null
      },
      {
        "name": "tooljson",
        "description": "Tool JSON contract",
        "passed": true,
        "duration": 9871,
        "error": null
      },
      {
        "name": "antifragile",
        "description": "Orchestrator antifragile behavior",
        "passed": true,
        "duration": 6780,
        "error": null
      },
      {
        "name": "catalog",
        "description": "Catalog action routing",
        "passed": true,
        "duration": 5062,
        "error": null
      },
      {
        "name": "policy",
        "description": "Policy tools (canonTarget, docFetch)",
        "passed": true,
        "duration": 5346,
        "error": null
      },
      {
        "name": "adversarial",
        "description": "Relevance arbitration, URI collisions, drift detection",
        "passed": true,
        "duration": 11785,
        "error": null
      },
      {
        "name": "mcp-instructions",
        "description": "MCP instructions contract",
        "passed": true,
        "duration": 1046,
        "error": null
      },
      {
        "name": "mcp-prompts",
        "description": "MCP prompts",
        "passed": false,
        "duration": 1000,
        "error": "Command failed: bash tests/mcp-prompts-smoke.sh\nfile:///home/user/oddkit/[eval1]:6\nconsole.log('Listed prompts:', prompts.map(p => p.name).join(', '));\n                                       ^\n\nTypeError: prompts.map is not a function\n    at file:///home/user/oddkit/[eval1]:6:40\n    at ModuleJob.run (node:internal/modules/esm/module_job:343:25)\n    at async onImport.tracePromise.__proto__ (node:internal/modules/esm/loader:272:26)\n    at async ModuleLoader.executeModuleJob (node:internal/modules/esm/loader:268:20)\n    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)\n\nNode.js v22.22.0\n"
      },
      {
        "name": "mcp-orchestrate",
        "description": "Orchestrate citations",
        "passed": true,
        "duration": 3224,
        "error": null
      },
      {
        "name": "instruction-sync",
        "description": "Instruction sync routing",
        "passed": true,
        "duration": 2503,
        "error": null
      },
      {
        "name": "sync-agents",
        "description": "Sync-agents command",
        "passed": true,
        "duration": 7864,
        "error": null
      },
      {
        "name": "noindex-exclusion",
        "description": ".noindex epistemic exclusion",
        "passed": true,
        "duration": 1175,
        "error": null
      },
      {
        "name": "odd-uri-scheme",
        "description": "odd:// URI containment",
        "passed": true,
        "duration": 731,
        "error": null
      },
      {
        "name": "preflight",
        "description": "Preflight action routing",
        "passed": true,
        "duration": 7058,
        "error": null
      }
    ]
  },
  "probes": {
    "total": 6,
    "passed": 6,
    "failed": 0,
    "results": [
      {
        "name": "canon_target",
        "passed": true,
        "data": {
          "mode": "head",
          "commit": "2e1b81e",
          "commitFull": "2e1b81e21f57cbc2678919c1123d974e239e60fe",
          "ref": "main",
          "source": "default"
        },
        "error": null
      },
      {
        "name": "index_merge",
        "passed": true,
        "data": {
          "total": 173,
          "local": 9,
          "baseline": 164,
          "excluded_by_noindex": 3,
          "governing": 74,
          "operational": 99,
          "baseline_commit": "2e1b81e21f57cbc2678919c1123d974e239e60fe",
          "baseline_available": true
        },
        "error": null
      },
      {
        "name": "klappy_uri_containment",
        "passed": true,
        "data": {
          "resolution_works": true,
          "traversal_blocked": true,
          "content_length": 4591,
          "content_hash": "sha256:85d7e6d5e23cad15aef9d08e7af70b508edf7dd9354cf416f838fd28953aa555"
        },
        "error": null
      },
      {
        "name": "odd_uri_containment",
        "passed": true,
        "data": {
          "normalization_works": true,
          "traversal_blocked": true
        },
        "error": null
      },
      {
        "name": "librarian_epoch4",
        "passed": true,
        "data": {
          "status": "SUPPORTED",
          "confidence": 0.51,
          "evidence_count": 5,
          "has_epoch4_evidence": true,
          "advisory": true
        },
        "error": null
      },
      {
        "name": "noindex_exclusion",
        "passed": true,
        "data": {
          "excluded_by_noindex": 3
        },
        "error": null
      }
    ]
  },
  "semantic_sha256": "cfd70720cd77466f"
}