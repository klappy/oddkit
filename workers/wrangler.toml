# oddkit MCP Worker
# Exposes oddkit as a remote MCP server for Claude.ai
# Uses createMcpHandler (stateless) from CF Agents SDK

name = "oddkit"
main = "src/index.ts"
compatibility_date = "2025-03-10"
compatibility_flags = ["nodejs_compat"]
keep_vars = true

# Environment variables
[vars]
BASELINE_URL = "https://raw.githubusercontent.com/klappy/klappy.dev/main"
# ODDKIT_VERSION injected at deploy time from root package.json

# OPENAI_API_KEY â€” set via Cloudflare dashboard: Workers > oddkit > Settings > Variables and Secrets

# KV for caching baseline index
[[kv_namespaces]]
binding = "BASELINE_CACHE"
id = "6baa38d843404fc9b703f3c9053d8c52"

# R2 for storing ZIP files and extracted content
[[r2_buckets]]
binding = "BASELINE"
bucket_name = "oddkit-baseline"
