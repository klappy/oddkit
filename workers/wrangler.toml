# oddkit MCP Worker
# Exposes oddkit as a remote MCP server for Claude.ai

name = "oddkit"
main = "src/index.ts"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]

# Environment variables
[vars]
BASELINE_URL = "https://raw.githubusercontent.com/klappy/klappy.dev/main"
ODDKIT_VERSION = "0.11.0"

# OAuth configuration (set via wrangler secret)
# OAUTH_CLIENT_ID = ""
# OAUTH_CLIENT_SECRET = ""

# KV for caching baseline index
[[kv_namespaces]]
binding = "BASELINE_CACHE"
id = "oddkit-baseline-cache"
preview_id = "oddkit-baseline-cache-preview"

# R2 for storing ZIP files and extracted content
[[r2_buckets]]
binding = "BASELINE_R2"
bucket_name = "oddkit-baseline"
preview_bucket_name = "oddkit-baseline-preview"

# Optional: Durable Objects for session state
# [durable_objects]
# bindings = [
#   { name = "SESSIONS", class_name = "SessionState" }
# ]
